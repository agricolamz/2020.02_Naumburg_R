---
output: html_document
editor_options: 
  chunk_output_type: console
---
# Text manipulations {#texts}

I will still use a lot of `tidyverse`:

```{r, message=FALSE}
library(tidyverse)
```

## `read_lines()`

If you want to read text in R you can use the `read_lines()` function:

```{r}
romeo_i_julia <- read_lines("https://raw.githubusercontent.com/agricolamz/2020.02_Naumburg_R/master/data/romeo_i_julia.txt")
```

As a result you will get a vector with characters. It is easy to convert it to dataframe:

```{r}
tibble(text = romeo_i_julia)
```

## `gutenbergr`
The `gutenbergr` package is an API for a very old [project Guttenberg](http://www.gutenberg.org/), that is a library of over 60,000 free eBooks. 

```{r}
library(gutenbergr)
```

The most important part of this package is `gutenberg_metadata` dataset -- that is a catalogue of everything in the Guttenberg library.

```{r}
str(gutenberg_metadata)
```

How many languages are presented in the Gutenberg library?

```{r}
gutenberg_metadata %>% 
  count(language, sort = TRUE)
```

How many authors are availible?

```{r}
gutenberg_metadata %>% 
  count(author, sort = TRUE)
```

How many Polish texts are availible?

```{r}
gutenberg_metadata %>% 
  filter(language == "pl") %>% 
  count(author, sort = TRUE)
```

```{block, type = "rmdtask"}
Whose texts are the most numerous in German part of the Gutenberg library? Put his/her last name in the form.
```

```{r, results='asis', echo = FALSE, eval = knitr::is_html_output()}
library(checkdown)

checkdown::autocheck_question(question_id = "2_3", answer =  "Goethe", wrong = "Without umlaut, please")
```

Lets have a look at the Polish part of Gutenberg library:

```{r}
gutenberg_metadata %>% 
  filter(author == "Mickiewicz, Adam",
         language == "pl")
```

Lets download Adam Mickiewicz's sonets:

```{r, cache=TRUE}
text <- gutenberg_download(27081)
text
```

It is possible to use multiple ids. Lets also download some poems by Mickiewicz, Kochanowski, Krasinski, and Oppman:

```{r, cache=TRUE}
text <- gutenberg_download(c(27081, 27871, 28009, 27208))
text
```

Be aware:

* texts could be stored with the wrong encoding;
* texts could be stored with normolised orthography (e. g. Kochanowski, look at rows 99 and 100);

```{r}
text %>% 
  filter(gutenberg_id == 28009)
```

* there are a lot of empty characters;
* and probably a lot of other problems.

I annotated this texts:

```{r}
text <- read_csv("")
```


## `tidytext`

## `udpipe`

## `stylo` 

